\documentclass[gradu, twoside]{tktltiki}
\usepackage{amsmath}
\usepackage{url}
\begin{document}

\title{}
\author{Jani Rahkola}
\date{\today}
\level{Tutkielma}
\numberofpagesinformation{}

\classification{A.1 [Introductory and Survey] \\ G.2.1 [Discrete
    Mathematics]: Combinatorics---Combinatorial algorithms \\ F.2.2
  [Analysis of Algorithms and Problems]: Nonnumerical Algorithms and
  Problems---Computations on Discrete Structures}

\keywords{vakaan avioliiton ongelma, opiskelijavalinta, aikavaativuus}

\maketitle

\doublespacing

\faculty{Matemaattis-luonnontieteellinen}
\department{Tietojenkäsittelytieteen laitos}
\subject{Tietojenkäsittelytiede}

\begin{abstract}
\end{abstract}

\mytableofcontents

\section{Johdanto}

\section{Opiskelijavalintaongelma}

Opiskelijavalintaongelma on tilanne, jossa useat oppilaitokset
kilpailevat keskenään hakijoista. Hakijat ovat mahdollisesti
kiinnostuneita vain osasta oppilaitoksista, tai heidän
valinnanmahdollisuuksiaan on rajattu. Samoin oppilaitokset ovat
voineet karsia hakijoita esimerkiksi valintakokeilla ja
oppilaitoksilla on usein rajattu määrä avoimia paikkoja. Lisäksi
molemmat toimijat asettavat kiinnostuksenkohteensa
paremmuusjärjestykseen. Toiset oppilaitokset kiinnostavat hakijoita
toisia enemmän, ja oppilaitokset haluavat täyttää avoimet paikkansa
mahdollisimman hyvillä hakijoilla.

Määritellään yllä kuvattu ongelma formaalisti. Olkoon $O$
oppilaitosten joukko ja $H$ hakijoiden joukko. Merkitään $a \prec_x b$
jos toimija $x$ pitää enemmän $a$:sta kuin $b$:stä, ja $\emptyset
\prec_x a$ mikäli toimija $x$ ei halua tulla valituksi/valita toimijaa
a missään tilanteessa. Olkoon lisäksi jokaisella oppilaitoksella $o
\in O$ avoimien paikkojen määrä $q_o$. Näin kuvattu
\emph{opiskelijavalintaongelma} pyritään ratkaisemaan määräämällä
halutut ominaisuudet toteuttava \emph{sijoittelu} $\mu \subset O
\times H$ jossa $(o, h) \in \mu$ jos hakija $h$ on valittu
oppilaitokseen $o$. Sijoittelulle tulee päteä $|\mu(o)| \leq q_o$, eli
jokaiseen oppilaitokseen on valittu korkeintaan niin monta hakijaa
kuin sillä oli avoimia paikkoja. Lisäksi jos $\emptyset \prec_o h$ tai
$\emptyset \prec_h o$, niin $(o, h) \notin \mu)$. Siis hakija $o$ ei
saa tulla sijoitetuksi oppilaitokseen $h$ jos hän ei niin halua, tai
oppilaitos ei halua ottaa hakijaa vastaan.

\section{Sijoittelun ominaisuuksia}

Sijoittelulle voidaan määritellä useita haluttuja ominaisuuksia. Gale
ja Shapley määrittelevät kaksi tällaista ominaisuutta
\cite{galeshapley62}. Ensimmäinen näistä on vakaus. Vakaassa
sijoittelussa ei löydy sellaista oppilaitosta ja hakijaa, että hakija
ei ole sijoitettu oppilaitokseen vaikka pitää sitä mieluisampana kuin
nykyistä sijoitustaan, ja oppilaitoksessa on tyhjä paikka tai
oppilaitos pitää hakijaa parempana valintana kuin jotain jo paikan
täyttävää hakijaa. Sijoittelu $\mu$ on siis \emph{epävakaa}, jos on
olemassa $o \in O$ ja $h \in H$ joilla $(o, h) \notin \mu$, mutta $o
\prec_h \mu^{-1}(h)$ ja oppilaitoksessa $o$ on vapaa paikka, tai on
olemassa $h' \in H$ jolla $(o, h') \in \mu$ mutta $h \prec_o h'$.

Toinen Galen ja Shapleyn määrittelemä ominaisuus on optimaalisuus.
Sijoittelu on hakija-optimaalinen, jos jokainen hakija on siinä
vähintään yhtä mieluisassa oppilaitoksessa kuin missä tahansa muussa
vakaassa sijoittelussa. Sijoittelu $\mu$ on
\emph{hakija-optimaalinen}, jos ei ole olemassa toista vakaata
sijoittelu $\gamma$ jossa kaikilla $(o, h) \in \gamma$ pätee $o
\prec_h \mu^{-1}(h)$. Vastaavasti voidaan määritellä
oppilaitos-optimaalinen sijoittelu.

\section{Galen ja Shapleyn algoritmi}

Galen ja Shapleyn algoritmi etenee seuraavasti. Ensin jokainen hakija
pyytää tulla sijoitetuksi hänelle mieluisimpaan oppilaitokseen.
Jokainen oppilaitos $o$ valitsee alustavasti $q_o$ mieluisinta hakijaa
ja hylkää loput pyynnöt. Seuraavaksi kaikki hylätyksi tulleet hakijat
pyytävät tulla sijoitetuksi seuraavaksi mieluisimpaan oppilaitokseen.
Jokainen oppilaitos $o$ valitsee $q_o$ mieluisinta hakijaa alustavasti
valittujen ja uuden pyynnön lähettäneiden joukosta ja hylkää loput.
Näin jatketaan kunnes jokainen hakija on tullut alustavasti valituksi
tai hylätyksi jokaisesta listallaan olleesta oppilaitoksesta.

Jotta hakija ei tulisi valituksi oppilaitokseen johon häntä ei voida
valita, karsitaan ennen algoritmin suoritusta jokaisen hakijan
listalta ne oppilaitokset joihin hän ei voi tulla valituksi.

Algoritmin antama sijoittelu on vakaa ja hakija-optimaalinen. Lisäksi
muuttamalla algoritmia niin, että oppilaitokset tekevät aloitteen
antaa se oppilaitos-optimaalisen sijoittelun.\cite{galeshapley62}

\subsection{Laskennan aikavaativuus}

Galen ja Shapleyn algoritmi opiskelijavalintaongelman ratkaisemiseen
on yleistys heidän algorimistaan vakaan avioliiton ongelmaan
\cite[luku 1.6.3]{gusfield89}. Siispä algoritmi vie $\O(nm)$ ajan,
missä $n$ on oppilaitosten ja $m$ hakijoiden määrä \cite[sivu
  14]{gusfield89}.

Lisäksi opiskelijavalintaongelmassa kummankaan osapuolen ei tarvitse
asettaa paremmuusjärjestykseen kaikkia vastakkaisen osapuolen
toimijoita. Tämä muunnelma ei kuitenkaan muuta algoritmin
aikavaativuutta \cite{manlove02}.

\section{Tasapuolinen ratkaisu}

\section{Bostonin mekanismi}

Bostonin kaupungin vuodesta 1999 käyttämä valintamekanismi edustaa
opiskelijavalintaongelman ratkaisemiseksi käytettyjä algoritmeja joita
usein kutsutaan \emph{Bostonin mekanismiksi}. Sitä käytetään tai on
käytetty pienin muunnoksin Bostonin lisäksi monissa muissa
Yhdysvaltain koulupiireissä \cite{abdusön93}. Varsinaisen sijoittelun
muodostava algoritmi toimii seuraavasti \cite{abdusön93}.

Ensimmäisellä kierroksella jokainen oppilaitos $o$ valitsee
korkeintaan $q_o$ mieluisinta hakijaa niiden hakijoiden joukosta jotka
pitävät $o$:ta mieluisimpana hakukohteenaan. Valitut hakijat
sijoitetaan oppilaitokseen.

Yleisesti kierroksella $k$ jokainen oppilaitos $o$ jolla on vielä
avoimia paikkoja pyrkii täyttämään paikat mieltymystensä mukaisessa
järjestyksessä niillä hakijoilla jotka pitävät $o$:ta $k$:neksi
mieluisimpana hakukohteena. Jokaisella kierroksella tehdyt sijoitukset
ovat lopullisia. Algoritmin suoritus päättyy, kun kaikki avoimet
paikat on täytetty.

Bostonin mekanismi ei takaa vakaata sijoittelua. Tarkastellaan
esimerkkiä, jossa $O = \{o_1, o_2, o_3\}$, $H = \{h_1, h_2, h_3\}$ ja
toimijoiden mieltymykset ovat seuraavat:
\[
  \begin{array}{c c c}
    o_1 & o_2 & o_3 \\
    \hline
    h_2 & h_1 & h_1 \\
    h_1 & h_3 & h_2 \\
    h_3 & h_2 & h_3
  \end{array}
  \begin{array}{|c c c}
    h_1 & h_2 & h_3 \\
    \hline
    o_1 & o_2 & o_1 \\
    o_3 & o_1 & o_2 \\
    o_2 & o_3 & o_3
  \end{array}
\]
Bostonin mekanismi antaa sijoittelun $\{(o_1, h_1), (o_2, h_2), (o_3,
h_3)\}$ joka ei ole vakaa, sillä $h_3 \prec_{o_2} h_2$ ja $o_2
\prec_{h_3} o_3$.

Bostonin mekanismi antama sijoittelu on hakija-optimaalinen \cite{?}.

\section{Top trading cycles}

\section{Yhteenveto}

\newpage
\begin{thebibliography}{XXX99}

\bibitem[AbS93]{abdusön93}
  Atila Abdulkadiroğlu, Tayfun Sönmez
  School Choice: A Mechanism Design Approach
  \emph{The American Economic Review, 93, 3 (2003), sivut 729-747}

\bibitem[GaS62]{galeshapley62}
  D. Gale, L. S. Shapley.
  College Admissions and the Stability of Marriage.
  \emph{The American Mathematical Monthly, 69, 1 (1962)}

\bibitem[GuI89]{gusfield89}
  D. Gusfield, Robert W. Irving.
  The Stable Marriage Problem: Structure and Algorithms.
  \emph{MIT Press, Cambridge, MA, 1989}

\bibitem[OPH12]{OPH12}
  Opetushallitus.
  Aloituspaikat, hakijat, hyväksytyt ja paikan vastaanottaneet
  kevään 2011 ammatillisen ja lukiokoulutuksen yhteishaussa.
  \url{https://www.kouluta.fi/koulutadw/faces/app/startupDWReports.jspx?report_id=18}
      [3.3.2012]

\bibitem[MII02]{manlove02}
  David F. Manlove, Robert W. Irving, Kazuo Iwama, Shuichi Miyazaki,
  Yasufumi Morita.
  Hard variants of stable marriage.
  \emph{Theoretical Computer Science, 276, (2002), sivut 261-279}

\bibitem[Che89]{cheng89}
  Cheng Ng.
  Lower Bounds for the Stable Marriage Problem and its Variants.
  \emph{30th Annual Symposium on Foundations of Computer Science,
    (1989), sivut 129-133}

\end{thebibliography}
\end{document}
